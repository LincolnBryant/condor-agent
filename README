
CycleAgent (c) 2008 Cycle Computing.  All rights reserved.

CycleAgent is a program that runs beside a Condor scheduler, and provides remote access to job data and
history files over HTTP and local submission of jobs to that scheduler.  It also supports gzip 
compression, which reduces the bandwidth needed by a factor of 10-20x.  This is very valuable for grids 
running across a WAN.

CycleAgent is distributed as either a Python program, which requires Python 2.6 or greater, or
as a Windows binary, which does not require Python.

To enable the CycleAgent on a scheduler, extract the appropriate CycleAgent package into
Condor's sbin directory (or bin for Windows).  Change your Condor configuration as follows:

CYCLE_AGENT = $(SBIN)/cycle_agent/cycle_agent
CYCLE_AGENT_ENVIRONMENT = "CONDOR_BIN_PATH=$(BIN)"
CYCLE_AGENT_SUBMIT_DIR = $(LOCAL_DIR)/submit

DAEMON_LIST = $(DAEMON_LIST), CYCLE_AGENT
CYCLE_AGENT_PORT = 8008
SCHEDD_ATTRS = CYCLE_AGENT_PORT, CYCLE_AGENT_SUBMIT_DIR, $(SCHEDD_ATTRS)

Note that the CYCLE_AGENT_SUBMIT_DIR directory can be any directory on disk into which the job files can 
be written. The above is only a suggested default location.

Then restart the master:

condor_restart

Verify that the attribute is present:

condor_status -schedd -l | grep CYCLE_AGENT_PORT

Test that it is running correctly:

SCHEDD=`condor_status -schedd -format "%s\n" Name | head -n 1`
curl http://localhost:8008/condor/schedd/$SCHEDD/jobs

This should give output similar to condor_q -l.

CycleServer will detect the agent and get jobs from it after the next polling interval.

To enable history, we recommend the following Condor settings:

HISTORY = $(SPOOL)/history
ENABLE_HISTORY_ROTATION = True
MAX_HISTORY_LOG = 4000000
MAX_HISTORY_ROTATIONS = 5

This will ensure that the history log stays small, and provides 20-24MB of history (5 backups plus the original).
A job ClassAd is usually less than 4k, so this is over 5000 jobs.
